@if (isAuthenticated()) {
<div class="app-shell">

  <header class="app-shell__header">
    <div class="brand">
      <img class="brand__logo" src="/Manus_Homeopathy_Logo.png" alt="Manu's Homeopathy Clinic Logo">
      <div>
        <p class="brand__title">Manu's Homeopathy Clinic</p>
        <p class="brand__subtitle">Natural Healing</p>
      </div>
      <button class="menu-btn" (click)="toggleSidebar()" title="Toggle Menu">
        <i class="fas fa-bars"></i>
      </button>
    </div>

    <div class="toolbar" role="toolbar" aria-label="Quick actions">
      <a routerLink="/profile" class="toolbar__btn" title="Profile" routerLinkActive="active">
        <i class="fas fa-user-shield"></i>
      </a>
      <a routerLink="/cart" class="toolbar__btn" title="Cart" routerLinkActive="active">
        <i class="fas fa-shopping-cart"></i>
        @if (cartCount() > 0) {
          <span class="cart-count">{{ cartCount() }}</span>
        }
      </a>
      <button class="toolbar__btn" title="Logout" (click)="logout()">
        <i class="fas fa-sign-out-alt"></i>
      </button>
    </div>
  </header>

  <div class="app-body">
    
    <!-- ------------------ UPDATED SIDEBAR ------------------ -->
    <aside class="side-nav"
           [class.expanded]="isSideNavExpanded"
           (mouseenter)="hoverEnter()"
           (mouseleave)="hoverLeave()">

      <nav class="side-nav__menu">
        <ul>
          <li *ngFor="let item of navigationData" class="side-nav__item">
            <a [routerLink]="item.router_link"
               routerLinkActive="active"
               [routerLinkActiveOptions]="{ exact: item.router_link === '' }"
               class="side-nav__link">
               
              <span class="side-nav__icon">
                {{ item.icon ? (item.page | slice:0:1 | uppercase) : (item.page | slice:0:1 | uppercase) }}
              </span>

              <span class="side-nav__label">
                {{ item.page }}
              </span>

            </a>
          </li>
        </ul>
      </nav>

    </aside>
    <!-- ---------------- END UPDATED SIDEBAR ---------------- -->

    <main class="app-shell__content">
      <router-outlet />
    </main>
  </div>
</div>
<app-notification-center />
} @else {
<router-outlet />
<app-notification-center />
}
<app-loading-spinner />

<section class="roles-section">
  <div class="container">
    <div class="section-header">
      <h2><i class="fas fa-users-cog"></i> Roles Management</h2>
      <a routerLink="/admin/roles/create" class="btn btn-primary">
        <i class="fas fa-plus"></i> Create New Role
      </a>
    </div>

    <div class="roles-grid">
      @if (roles.length === 0) {
        <div class="empty-state">
          <i class="fas fa-users"></i>
          <h3>No roles found</h3>
          <p>Create your first role to get started</p>
        </div>
      } @else {
        @for (role of roles; track role.id) {
          <div class="role-card">
            <div>
              <div class="role-header">
                <h3>{{ role.name }}</h3>
                <div class="role-actions">
                    <button class="btn btn-sm btn-outline" title="Edit" (click)="editRole(role)">
                      <i class="fas fa-edit"></i>
                    </button>
                    <button class="btn btn-sm btn-danger" title="Delete" (click)="deleteRole(role)">
                      <i class="fas fa-trash"></i>
                    </button>
                  </div>
              </div>
              <p class="role-description">{{ role.description }}</p>
            </div>
            <div class="role-permissions">
              <h4>Permissions ({{ role.fullPermissions?.length || 0 }})</h4>
              <div class="permissions-list">
                @for (permission of (role.fullPermissions || []).slice(0, 3); track permission.permission_id) {
                  <span class="permission-badge">{{ permission.permission_name }}</span>
                }
                @if ((role.fullPermissions?.length || 0) > 3) {
                  <a class="know-more-link" (click)="editRole(role)">know more...</a>
                }
              </div>
            </div>
          </div>
        }
      }
    </div>
  </div>
</section>
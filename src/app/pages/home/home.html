
@if(!perception_on_homeopathy_plan()){
  <section class="hero">
    <div class="container">
      <div class="hero-content">
          <h1>Welcome to Manu's Homeopathy Clinic</h1>
          <p>Discover natural remedies and holistic wellness products. Embrace natural healing today!</p>
          <div class="hero-buttons">
            <a routerLink="/products" [queryParams]="{ category: 'books' }" class="btn btn-primary">Browse Books</a>
            <a routerLink="/products" [queryParams]="{ category: 'videos' }" class="btn btn-outline">Explore Videos</a>
          </div>
      </div>
    </div>
  </section>
}

@else {
  <section class="poh-hero">
    <div class="container">
      <div class="hero-content">
        <h1>{{perception_on_homeopathy_plan().name}}</h1>
        <div class="plan-header">
          <div class="plan-price">
            @if (hasSubscriptionDiscount(perception_on_homeopathy_plan())) {
            <div class="subscription-pricing">
              <div class="subscribe-proces">
                <div class="original-price">
                  <span class="currency">₹</span>
                  <span class="amount">{{ perception_on_homeopathy_plan().price | number:'1.2-2' }}</span>
                  <span class="period">/{{ perception_on_homeopathy_plan().duration }}</span>
                </div>
                <div class="discounted-price">
                  <span class="currency">₹</span>
                  <span class="amount">{{ getSubscriptionDiscountedPrice(perception_on_homeopathy_plan()) | number:'1.2-2' }}</span>
                  <span class="period">/{{ perception_on_homeopathy_plan().duration }}</span>
                </div>
              </div>
              <div class="discount-info">
                Save ₹{{ getSubscriptionDiscountAmount(perception_on_homeopathy_plan()) | number:'1.2-2' }}
                ({{ perception_on_homeopathy_plan().discountType === 'percentage' ? perception_on_homeopathy_plan().discount + '%' : '₹' + perception_on_homeopathy_plan().discount }} off)
              </div>
            </div>
            } @else {
            <span class="currency">₹</span>
            <span class="amount">{{ perception_on_homeopathy_plan().price | number:'1.2-2' }}</span>
            <span class="period">/{{ perception_on_homeopathy_plan().duration }}</span>
            }
          </div>
        </div>
      </div>
    </div>
  </section>
}

<section class="featured-section">
  <div class="container">
    <div class="section-header">
      <h2><i class="fas fa-book"></i> Featured Books</h2>
      <a routerLink="/products" [queryParams]="{ category: 'books' }" class="view-all">
        View All <i class="fas fa-arrow-right"></i>
      </a>
    </div>
    <div class="products-grid grid-cols-4 gap-15">
      @for (book of featuredBooks(); track book.id) {
      <article class="product-card" [routerLink]="['/product', book.id]">
        <img [src]="book.image" [alt]="book.title" class="product-image" />
        <div class="product-info">
          <h3 class="product-title">{{ book.title }}</h3>
          <p class="product-author">Book</p>
          <div class="product-rating">
            <i class="fas fa-star star" *ngFor="let star of [1,2,3,4,5]; let i = index"
              [class.empty]="book.rating < i + 1"></i>
            <span>{{ book.rating }}</span>
          </div>
          <div class="product-footer">
            @if (hasProductDiscount(book)) {
            <div class="product-pricing">
              <div class="original-price">{{ book.price | currency:'INR':'symbol':'1.2-2' }}</div>
              <div class="discounted-price">{{ getProductDiscountedPrice(book) | currency:'INR':'symbol':'1.2-2' }}
              </div>
              <div class="discount-info">Save {{ getProductDiscountAmount(book) | currency:'INR':'symbol':'1.2-2' }}
              </div>
            </div>
            } @else {
            <span class="product-price">{{ book.price | currency:'INR':'symbol':'1.2-2' }}</span>
            }
            @if (book.type === 'book' && (book.shipping_charges || book.tax)) {
            <div class="additional-charges">
              @if (book.shipping_charges) {
              <span class="shipping-info">+ Shipping: {{ book.shipping_charges | currency:'INR':'symbol':'1.2-2'
                }}</span>
              }
              @if (book.tax) {
              <span class="tax-info">+ Tax: {{ book.tax }}%</span>
              }
              <span class="final-price">Total: {{ getProductFinalPrice(book) | currency:'INR':'symbol':'1.2-2'
                }}</span>
            </div>
            }
            <button class="add-to-cart" (click)="addToCart(book); $event.preventDefault(); $event.stopPropagation();">
              <i class="fas fa-shopping-cart"></i> Add
            </button>
          </div>
        </div>
      </article>
      }
    </div>
    <div class="subscription-plans-section">
      <h3>Book Subscription Plans</h3>
      <div class="subscription-plans gap-25" [ngClass]="{ 'grid-cols-3' : bookPlans().length <= 3, 'grid-cols-4' : bookPlans().length > 3 }">
        @for (plan of bookPlans(); track plan.id) {
        <div class="plan-card" [class.popular]="plan.popular">
          <div class="mb-10">
            @if (plan.popular) {
            <div class="popular-badge">Most Popular</div>
            }
            <div class="plan-header">
              <h3>{{ plan.name }}</h3>
              <div class="plan-price">
                @if (hasSubscriptionDiscount(plan)) {
                <div class="subscription-pricing">
                  <div class="subscribe-proces">
                    <div class="original-price">
                      <span class="currency">₹</span>
                      <span class="amount">{{ plan.price | number:'1.2-2' }}</span>
                      <span class="period">/{{ plan.duration }}</span>
                    </div>
                    <div class="discounted-price">
                      <span class="currency">₹</span>
                      <span class="amount">{{ getSubscriptionDiscountedPrice(plan) | number:'1.2-2' }}</span>
                      <span class="period">/{{ plan.duration }}</span>
                    </div>
                  </div>
                  <div class="discount-info">
                    Save ₹{{ getSubscriptionDiscountAmount(plan) | number:'1.2-2' }}
                    ({{ plan.discountType === 'percentage' ? plan.discount + '%' : '₹' + plan.discount }} off)
                  </div>
                </div>
                } @else {
                <span class="currency">₹</span>
                <span class="amount">{{ plan.price | number:'1.2-2' }}</span>
                <span class="period">/{{ plan.duration }}</span>
                }
              </div>
            </div>
            <div class="plan-description">
              <p>{{ plan.description }}</p>
            </div>
            <div class="plan-benefits">
              <h4>Benefits:</h4>
              <ul>
                @for (benefit of plan.benefits; track $index) {
                <li><i class="fas fa-check"></i> {{ benefit }}</li>
                }
              </ul>
            </div>
            @if (plan.limitations && plan.limitations.length > 0) {
            <div class="plan-limitations">
              <h4>Limitations:</h4>
              <ul>
                @for (limitation of plan.limitations; track $index) {
                <li><i class="fas fa-times"></i> {{ limitation }}</li>
                }
              </ul>
            </div>
            }
          </div>
          <button class="btn btn-primary subscribe-btn" (click)="subscribe(plan)">
            Subscribe Now
          </button>
        </div>
        }
      </div>
    </div>
  </div>
</section>

<section class="featured-section bg-light">
  <div class="container">
    <div class="section-header">
      <h2><i class="fa fa-film"></i> Featured Videos</h2>
      <a routerLink="/products" [queryParams]="{ category: 'videos' }" class="view-all">
        View All <i class="fas fa-arrow-right"></i>
      </a>
    </div>
    <div class="products-grid grid-cols-4 gap-15">
      @for (video of featuredVideos(); track video.id) {
      <article class="product-card video-card" [routerLink]="['/product', video.id]">
        <img [src]="video.image" [alt]="video.title" class="product-image" />
        <div class="play-overlay">
          <i class="fas fa-play"></i>
        </div>
        <div class="product-info">
          <h3 class="product-title">{{ video.title }}</h3>
          <p class="product-author">Video</p>
          <div class="product-rating">
            <i class="fas fa-star star" *ngFor="let star of [1,2,3,4,5]; let i = index"
              [class.empty]="video.rating < i + 1"></i>
            <span>{{ video.rating }}</span>
          </div>
          <div class="product-footer">
            @if (hasProductDiscount(video)) {
            <div class="product-pricing">
              <div class="original-price">{{ video.price | currency:'INR':'symbol':'1.2-2' }}</div>
              <div class="discounted-price">{{ getProductDiscountedPrice(video) | currency:'INR':'symbol':'1.2-2'
                }}</div>
              <div class="discount-info">Save {{ getProductDiscountAmount(video) | currency:'INR':'symbol':'1.2-2'
                }}</div>
            </div>
            } @else {
            <span class="product-price">{{ video.price | currency:'INR':'symbol':'1.2-2' }}</span>
            }
            <button class="add-to-cart"
              (click)="addToCart(video); $event.preventDefault(); $event.stopPropagation();">
              <i class="fas fa-shopping-cart"></i> Add
            </button>
          </div>
        </div>
      </article>
      }
    </div>
    <div class="subscription-plans-section">
      <h3>Video Subscription Plans</h3>
      <div class="subscription-plans gap-25" [ngClass]="{ 'grid-cols-3' : videoPlans().length <= 3, 'grid-cols-4' : videoPlans().length > 3 }">
        @for (plan of videoPlans(); track plan.id) {
        <div class="plan-card" [class.popular]="plan.popular">
          <div class="mb-10">
            @if (plan.popular) {
          <div class="popular-badge">Most Popular</div>
          }
          <div class="plan-header">
            <h3>{{ plan.name }}</h3>
            <div class="plan-price">
              @if (hasSubscriptionDiscount(plan)) {
              <div class="subscription-pricing">
                <div class="subscribe-proces">
                  <div class="original-price">
                    <span class="currency">₹</span>
                    <span class="amount">{{ plan.price | number:'1.2-2' }}</span>
                    <span class="period">/{{ plan.duration }}</span>
                  </div>
                  <div class="discounted-price">
                    <span class="currency">₹</span>
                    <span class="amount">{{ getSubscriptionDiscountedPrice(plan) | number:'1.2-2' }}</span>
                    <span class="period">/{{ plan.duration }}</span>
                  </div>
                </div>
                
                <div class="discount-info">
                  Save ₹{{ getSubscriptionDiscountAmount(plan) | number:'1.2-2' }}
                  ({{ plan.discountType === 'percentage' ? plan.discount + '%' : '₹' + plan.discount }} off)
                </div>
              </div>
              } @else {
              <span class="currency">₹</span>
              <span class="amount">{{ plan.price | number:'1.2-2' }}</span>
              <span class="period">/{{ plan.duration }}</span>
              }
            </div>
          </div>
          <div class="plan-description">
            <p>{{ plan.description }}</p>
          </div>
          <div class="plan-benefits">
            <h4>Benefits:</h4>
            <ul>
              @for (benefit of plan.benefits; track $index) {
              <li><i class="fas fa-check"></i> {{ benefit }}</li>
              }
            </ul>
          </div>
          @if (plan.limitations && plan.limitations.length > 0) {
          <div class="plan-limitations">
            <h4>Limitations:</h4>
            <ul>
              @for (limitation of plan.limitations; track $index) {
              <li><i class="fas fa-times"></i> {{ limitation }}</li>
              }
            </ul>
          </div>
          }
          </div>
          <button class="btn btn-primary subscribe-btn" (click)="subscribe(plan)">
            Subscribe Now
          </button>
        </div>
        }
      </div>
    </div>
  </div>
</section>